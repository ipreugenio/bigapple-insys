{% extends 'production_manager_page_ui.html' %}

{% block content %}

    <h2>Create SupplierPO Form</h2>

    <div class="ui container">
        <form id="myForm"  data-items-url="{% url 'ajax_load_items' %}" method="post" enctype="multipart/form-data" novalidate>

                {% csrf_token %}
                {% include 'inventory/template_form.html' %}
                {% include 'inventory/template_formset.html' %}

            {{formset.management_form}}
            <button type="submit" class ="btn btn-success">Submit</button>
        </form>
    </div>

{% endblock %}

{% block script %}

    <script>
        $( document ).ready(function() {
            $(function() {
                $('#myForm .formset_class').formset({
                    prefix: '{{ formset.prefix }}'
                });            
            })

           $( "#btn" ).click(function() {
                alert( "Handler for .click() called." );
            });

            $('select').on('change', function() {
                alert( this.value );

                var url = $("#myForm").attr("data-items-url");
                var itemsId = $(this).val();

                $.ajax({
                    url: url,
                    data: {
                    'items': itemsId
                    },
                    success: function (data) {
                    $("#id_items").html(data);
                    }
                });
            });
        
        });
    </script>

{%endblock %}